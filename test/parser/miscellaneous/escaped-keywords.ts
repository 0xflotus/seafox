import { Context } from '../../../src/parser/bits';
import * as t from 'assert';
import { parseScript, parseModule } from '../../../src/seafox';

describe('Miscellaneous - Escaped keywords', () => {
  for (const arg of [
    '(x === n\\u0075ll);',
    'var x = n\\u0075ll;',
    'switch (this.a) { c\\u0061se 6: break; }',
    'try { } c\\u0061tch (e) {}',
    'switch (this.a) { d\\u0065fault: break; }',
    'class C \\u0065xtends function B() {} {}',
    'for (var a i\\u006e this) {}',
    'if (this \\u0069nstanceof Array) {}',
    'for (let l\\u0065t in {}) {}',
    'a(1,2\\u0063onst foo = 1;',
    '[v\\u{0061}r] = obj',
    'function a({var:v\\u{0061}r}) { }',
    //'(function a(v\\u0061r) { })',
    //'(function a({v\\u{0061}r}) { })',
    // '(function a([{v\\u{0061}r}]) { })',
    '(function a([[v\\u{0061}r]]) { })',
    '(function a({ hello: [v\\u{0061}r]}) { })',
    '(function a({ 0: {var:v\\u{0061}r}}) { })',
    '(function() {for (let l\\u0065t in {}) {}})()',
    'const [l\\u0065t] = 1',
    'const [l\\u0065t] = 1',
    'if (d\\u006f { true }) {}',
    'try { } catch (e) {} f\\u0069nally { }',
    'do { ; } wh\\u0069le (true) { }',
    'if ("foo" \\u0069n this) {}',
    'if (this \\u0069nstanceof Array) {}',
    'do { ; } wh\\u0069le (true) { }',
    'for (var i = 0; i < 100; ++i) { br\\u0065ak; }',
    '[v\\u{0061}r] = obj',
    '[f\\u0061lse] = []',
    '[th\\u{69}s] = []'

    /* 'var x = { interf\\u0061ce } = { interface: 42 };',
    'var x = ({ w\\u0069th }) => {};',
    'var n\\u0075ll = 1;',
    'var { n\\u0075ll } = { 1 };',
    'n\\u0075ll = 1;',
    '(x === tr\\u0075e);',
    'var x = tr\\u0075e;',
    'var tr\\u0075e = 1;',
    '({ def\\u0061ult })',
    '0, { def\\u{61}ult: x } = { default: 42 };',

    'var { tr\\u0075e } = {};',
    'tr\\u0075e = 1;',
    '(x === f\\u0061lse);',
    'var x = f\\u0061lse;',
    'var f\\u0061lse = 1;',
    'var { f\\u0061lse } = {};',
    'f\\u0061lse = 1;',



    '(n\\u0065w function f() {})',
    '(typ\\u0065of 123)',


    'cl\\u0061ss Foo {}',
   //  'export function br\\u0065ak() {}', Context.Strict | Context.Module],
   //  'class aw\\u0061it {}', Context.Strict | Context.Module],
  //   'class l\\u0065t {}', Context.Strict],
  //   'class st\\u0061tic {}', Context.Strict],
    'class st\\u0061tic {}',
   //  'class yi\\u0065ld {}', Context.Strict],
  //   'aw\\u0061it: 1;', Context.Strict | Context.Module],

    'let l\\u0065t = 1',
    'const l\\u0065t = 1',
    'let [l\\u0065t] = 1',
    'const [l\\u0065t] = 1',
    '(async ()=>{\\u0061wait 100})()',
    '(async ()=>{var \\u0061wait = 100})()',
    '\\u0063o { } while(0)',
    'v\\u0061r',
    '({\\u0067et get(){}})',
    '({\\u0073et set(){}})',
   //  'import* \\u0061s foo from "./icefapper.js";', Context.Strict | Context.Module],
   //  'void \\u0061sync function* f(){};', Context.Strict | Context.Module],
    'a(1,2\\u0063onst foo = 1;',
    '\\u0063o { } while(0)',
    'cl\\u0061ss Foo {}',
    'var {var:v\\u0061r} = obj',
    '(function v\\u0061r() { })',

    'v\\u0061r',
    'var v\\u0061r = 2000000;',
    'var v\\u{0061}r = 2000000',
    'try { } catch(v\\u{0061}r) { }',
    // 'var obj = { async method() { void \\u0061wait; } };', Context.Strict],
    'class C { async *gen() { void \\u0061wait; }}',
    'async() => { void \\u0061wait; };',
    '{for(o i\\u006E {}){}}',
    'class X { se\\u0074 x(value) {} }',
    'class X { st\\u0061tic y() {} }',
    '(function* () { y\\u0069eld 10 })',
    '({ \\u0061sync x() { await x } })',
    // 'export \\u0061sync function y() { await x }', Context.Module],
    '{for(o i\\u006E {}){}}',
    // 'impleme\\u{006E}ts', Context.Strict],
    // 'impleme\\u{006E}ts', Context.Strict | Context.Module],
    `'use strict'; impleme\\u{006E}ts`,

    'th\\u{69}s',
    'f\\u0061lse',
    'class C { static async method() { void \\u0061wait; }}',
    'while (i < 10) { if (i++ & 1) c\\u006fntinue; this.x++; }',
    '(function a({ hello: {var:v\\u{0061}r}}) { })',

    't\\u0072y { true } catch (e) {}',
    'var x = typ\\u0065of "blah"',
    'v\\u0061r a = true',
    'thi\\u0073 = 123;',
    'i\\u0066 (false) {}',

    'cl\\u0061ss Foo {}',
    'var f = f\\u0075nction() {}',
    "thr\\u006fw 'boo';",
    'var x = { n\\u0065w } = { new: 42 };',
  //   'var x = { privat\\u0065 } = { private: 42 };', Context.Strict | Context.Module],
 //    'var x = { sup\\u0065r } = { super: 42 };', Context.Strict | Context.Module],
 //    'var x = { v\\u0061r } = { var: 42 };', Context.Strict | Context.Module],
//    'var x = { privat\\u0065 } = { private: 42 };', Context.Strict | Context.Module],
    'w\\u0069th (this.scope) { }',
    'n\\u0075ll = 1;',
    '(x === tr\\u0075e);',

    'class X { st\\u0061tic y() {} }',
    'class C { st\\u0061tic set bar() {} }',
    'class C { st\\u0061tic *bar() {} }',
    'let l\\u0065t = 1',
    'const l\\u0065t = 1',
    'let [l\\u0065t] = 1',
    'const [l\\u0065t] = 1',

    '(n\\u0065w function f() {})',
    '(typ\\u0065of 123)',
    'var y = { c\\u0061se: x } = { case: 42 };',
    '({ def\\u{61}ult }) => 42;',
    '0, { def\\u{61}ult } = { default: 42 };',
    'var x = ({ bre\\u0061k }) => {};',
    'var x = ({ tr\\u0079 }) => {};',
    'var x = ({ typ\\u0065of }) => {};',
    'def\\u0061ult',
   //  'var x = { \\u0069mport } = { import: 42 };', Context.Strict | Context.Module],
    '(v\\u006fid 0)',
  //   'aw\\u0061it: 1;', Context.Module | Context.Strict],
    'var \\u{65}\\u{6e}\\u{75}\\u{6d} = 123;',
    '(function*() { return (n++, y\\u0069eld 1); })()',
    'var \\u0064elete = 123;',
    'var \\u{62}\\u{72}\\u{65}\\u{61}\\u{6b} = 123;',
    'var \\u0062\\u0072\\u0065\\u0061\\u006b = 123;;',
    'var \\u{63}ase = 123;',
    'var \\u{63}atch = 123;',
    'var x = { \\u0066unction } = { function: 42 };',
    'var \\u{63}ontinue = 123;',
    'var fina\\u{6c}ly = 123;',
    'var \\u{64}\\u{6f} = 123;',
    'var gen = async function *g() { yi\\u0065ld: ; };',
    'function *gen() { yi\\u0065ld: ; }',
    '(function *gen() { yi\\u0065ld: ; })',
    'i\\u0066 (0)',
    'var i\\u0066',
    // 'export {a \\u0061s b} from "";', Context.Strict | Context.Module],
    // 'export {} fr\\u006fm "";', Context.Strict | Context.Module],
    'for (a o\\u0066 b);',
    'class a { st\\u0061tic m(){} }',
    'var \\u{64}\\u{6f} = 123;',
    '(\\u0061sync function() { await x })',
    '(\\u0061sync () => { await x })',
    '\\u0061sync x => { await x }',
    'class X { \\u0061sync x() { await x } }',
    'class X { static \\u0061sync x() { await x } }',
    // 'export \\u0061sync function y() { await x }', Context.Strict | Context.Module],
    // 'export default \\u0061sync function () { await x }', Context.Strict | Context.Module],
    'for (x \\u006ff y) {}',
    '(async function() { aw\\u0061it x })',
    '(function*() { var y\\u0069eld = 1; })()',
    '(function*() { y\\u0069eld 1; })()',
    'wh\\u0069le (true) { }',
    'n\\u0065w function f() {}',
    'async () => { aw\\u{61}it: x }',
    'f\\u006fr (var i = 0; i < 10; ++i);',

    'd\\u0065bugger;',
    '\\u{74}rue',
    'var \\u{64}\\u{6f} = 123;',*/
    // 'var \\u{64}\\u{6f} = 123;', Context.Strict | Context.Module],
    // 'a\\u{0022}b=1', Context.Strict],
    // 'function impl\\u0065ments() {}', Context.Strict],
    // 'function impl\\u0065ments() {}', Context.Strict | Context.Module],
    // 'var gen = function *() { void yi\\u0065ld; };', Context.Strict | Context.Module],
    // 'var gen = async function *g() { void \\u0061wait; };', Context.Strict | Context.Module],
    // 'var gen = async function *g() { void \\u0061wait; };', Context.Strict | Context.Module],
    // '\\u0061sync function* f(){}', Context.Strict | Context.Module],
    // 'class l\\u0065t {}', Context.Strict | Context.Module],
    // 'class yi\\u0065ld {}', Context.Strict | Context.Module],
    // 'class l\\u0065t {}', Context.Strict],
    // 'class yi\\u0065ld {}', Context.Strict],
    /* 'class l\\u0065t {}',
    'class yi\\u0065ld {}',
    'class C { st\\u0061tic m() {} }',
    // 'var C = class aw\\u0061it {};', Context.Strict | Context.Module],
    'var gen = async function *() { var yi\\u0065ld; };',
    'var obj = { *method() { void yi\\u0065ld; } };',
    'var gen = function *g() { yi\\u0065ld: ; };',*/
    //'({ \\u0061sync* m(){}});'
  ]) {
    it(`${arg}`, () => {
      t.throws(() => {
        parseScript(`${arg}`, {
          disableWebCompat: true
        });
      });
    });
  }

  for (const arg of [
    '(\\u0069mplements = 1);',
    'var impl\\u0065ments = 1;',
    'var { impl\\u0065ments  } = {};',
    '(\\u0069nterface = 1);',
    '({ def\\u0061ult: 0 })',
    '({ def\\u{61}ult: 0 })',
    'foo = {}; foo.def\\u{61}ult = 3;',
    'var int\\u0065rface = 1;',
    'var { int\\u0065rface  } = {};',
    '(p\\u0061ckage = 1);',
    'var packa\\u0067e = 1;',
    'var { packa\\u0067e  } = {};',
    '(p\\u0072ivate = 1);',
    'var p\\u0072ivate;',
    'var { p\\u0072ivate } = {};',
    '(prot\\u0065cted);',
    'var prot\\u0065cted = 1;',
    'var { prot\\u0065cted  } = {};',
    '(publ\\u0069c);',
    'var publ\\u0069c = 1;',
    'var { publ\\u0069c } = {};',
    '(st\\u0061tic);',
    'var st\\u0061tic = 1;',
    'var { st\\u0061tic } = {};',
    'l\\u0065t\na',
    // 'if (true) l\\u0065t: ;',
    'function l\\u0065t() { }',
    '(function l\\u0065t() { })',
    'async function l\\u0065t() { }',
    '(async function l\\u0065t() { })',
    '(class { get st\\u0061tic() {}})',
    '(class { set st\\u0061tic(x){}});',
    '(class { *st\\u0061tic() {}});',
    '(class { st\\u0061tic(){}});',
    '(class { static get st\\u0061tic(){}});',
    '(class { static set st\\u0061tic(x) {}});',
    'l\\u0065t => 42',
    '(\\u0061sync ())',
    'async l\\u0065t => 42',
    'function packag\\u0065() {}',
    'function impl\\u0065ments() {}',
    'function privat\\u0065() {}',
    '(y\\u0069eld);',
    'var impl\\u0065ments = 1;',
    'var { impl\\u0065ments  } = {};',
    '(\\u0069nterface = 1);',
    'var int\\u0065rface = 1;',
    'var { int\\u0065rface  } = {};',
    '(p\\u0061ckage = 1);',
    'var packa\\u0067e = 1;',
    'var { packa\\u0067e  } = {};',
    '(p\\u0072ivate = 1);',
    'var p\\u0072ivate;',
    'var { p\\u0072ivate } = {};',
    '(prot\\u0065cted);',
    'var prot\\u0065cted = 1;',
    'var { prot\\u0065cted  } = {};',
    '(publ\\u0069c);',
    'var C = class { get "def\\u{61}ult"() { return "get string"; } set "def\\u{61}ult"(param) { stringSet = param; } };',
    'var publ\\u0069c = 1;',
    'var { publ\\u0069c } = {};',
    '(st\\u0061tic);',
    'var st\\u0061tic = 1;',
    'var { st\\u0061tic } = {};',
    'var y\\u0069eld = 1;',
    'var { y\\u0069eld } = {};',
    'class aw\\u0061it {}',
    'aw\\u0061it: 1;',
    'function *a(){({yi\\u0065ld: 0})}',
    '\\u0061sync',
    'l\\u0065t\na',
    'l\\u0065t',
    `function a() {
      \\u0061sync
      p => {}
    }`,
    `(function a() {
      \\u0061sync
      p => {}
    })`,
    `async function a() {
      \\u0061sync
      p => {}
    }`
  ]) {
    it(`${arg}`, () => {
      t.doesNotThrow(() => {
        parseScript(`${arg}`);
      });
    });
  }
});
